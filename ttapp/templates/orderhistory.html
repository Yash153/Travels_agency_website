{% extends 'base.html' %}

{% block title %}Booking History{% endblock %}

{% block body %}

<h2>Booking History</h2>

<table style="width: 85%; border-collapse:collapse;" class="table table-striped table-bordered table-hover">
    {% if charter_history %}
    <h4>52 seater Bus</h4>
    <tr align = 'center'>
			<th> Source </th>
			<th> Destination </th>
			<th> Date of travel </th>
			<th> Date released </th>
      <th> Booked on </th>
      <th> Payment </th>
      <th> Amount </th>
      <th> Invoice </th>
      <th> Cancel booking </th>
      <th> Pay </th>
		</tr>
    {% endif %}
		{% for c in charter_history %}
            <tr align = center>
                <td>{{ c.source }}</td>
                <td>{{ c.destination }}</td>
                <td>{{ c.date_booked }}</td>
                <td>{{ c.date_released }}</td>
                <td>{{ c.dt }}</td>
                {% if c.get_payment_status_display == 'CANCELED' %}
                  <td><p style = "color: red;">{{ c.get_payment_status_display }}</p></td>
                {% else %}
                  <td>{{ c.get_payment_status_display }}</td>
                {% endif %}
                <td>{{ c.amount }}</td>
                {% if c.get_payment_status_display == 'SUCCESS' or c.get_payment_status_display == 'PENDING' or c.get_payment_status_display == 'CANCELED'%}
                  <td><a class="btn btn-outline-primary btn-sm signup-button" href="generateinvoice_52seater/{{ c.id }}">Print<span><i class="bi bi-file-earmark-arrow-down"></i></span></a></td> 
                {% endif %}
                {% if c.get_payment_status_display == 'SUCCESS'  or c.get_payment_status_display == 'PENDING' %}
                  <td><a class="btn btn-outline-danger btn-sm" href="cancelbooking_52seater/{{ c.id }}" onclick = "alert('r u sure you want to cancel?')">Cancel</a></td>  
                {% endif %}
                {% if c.get_payment_status_display == 'PENDING'%}
                  <td><a class="btn btn-outline-info btn-sm" href="pendingpayment/52seater/{{ c.id }}" onclick = "alert('r u sure you want to pay?')">Pay</a></td>  
                {% endif %}

            </tr>	
		{% endfor %}
</table>

<table style="width: 85%; border-collapse:collapse;" class="table table-striped table-bordered table-hover">
    {% if charter_history1 %}
    <h4>17 seater Bus</h4>
    <tr>
			<th> Source </th>
			<th> Destination </th>
      
			<th> Date of travel </th>
			<th> Date released </th>
      <th> Booked on </th>
      <th> Payment </th>
      <th> Amount </th>
      <th> Invoice </th>
      <th> Cancel booking </th>
      <th> Pay </th>
		</tr>
    {% endif %}
		{% for c in charter_history1 %}
            <tr>
                <td>{{ c.source }}</td>
                <td>{{ c.destination }}</td>
                
                <td>{{ c.date_booked }}</td>
                <td>{{ c.date_released }}</td>
                <td>{{ c.dt }}</td>
                {% if c.get_payment_status_display == 'CANCELED' %}
                  <td><p style = "color: red;">{{ c.get_payment_status_display }}</p></td>
                {% else %}
                  <td>{{ c.get_payment_status_display }}</td>
                {% endif %}
                <td>{{ c.amount }}</td>
                {% if c.get_payment_status_display == 'SUCCESS' or c.get_payment_status_display == 'PENDING' or c.get_payment_status_display == 'CANCELED'%}
                  <td><a class="btn btn-outline-primary btn-sm signup-button" href="generateinvoice_17seater/{{ c.id }}">Print<span><i class="bi bi-file-earmark-arrow-down"></i></span></a></td> 
                {% endif %}
                {% if c.get_payment_status_display == 'SUCCESS' or c.get_payment_status_display == 'PENDING'%}
                  <td><a class="btn btn-outline-danger btn-sm" href="cancelbooking_17seater/{{ c.id }}" onclick = "alert('r u sure you want to cancel?')">Cancel</a></td>  
                {% endif %}
                {% if c.get_payment_status_display == 'PENDING'%}
                  <td><a class="btn btn-outline-info btn-sm" href="pendingpayment/17seater/{{ c.id }}" onclick = "alert('r u sure you want to pay?')">Pay</a></td>  
                {% endif %}

            </tr>	
		{% endfor %}
</table>

<table style="width: 85%; border-collapse:collapse;" class="table table-striped table-bordered table-hover">
    {% if package_history %}
    <h4> Mumbai Darshan </h4>
    <tr>
			<th> Package </th>
			
      <th> Seats </th>
			<th> Date of travel </th>
      <th> Booked on </th>
      <th> Payment </th>
			<th> Amount </th>
      <th> Invoice </th>
      <th> Cancel booking </th>
      <th> Pay </th>

      
		</tr>
    {% endif %}
		{% for c in package_history %}
            <tr align = left>
                <td>{{ c.package }}</td>
                
                <td>{{ c.number_of_passengers }}</td>
                <td>{{ c.date_booked }}</td>
                <td>{{ c.dt }}</td>
                {% if c.get_payment_status_display == 'CANCELED' %}
                  <td><p style = "color: red;">{{ c.get_payment_status_display }}</p></td>
                {% else %}
                  <td>{{ c.get_payment_status_display }}</td>
                {% endif %}
                <td>{{ c.amount }}</td>
                {% if c.get_payment_status_display == 'SUCCESS' or c.get_payment_status_display == 'PENDING' or c.get_payment_status_display == 'CANCELED'%}
                  <td><a class="btn btn-outline-primary btn-sm signup-button" href="generateinvoice/{{ c.id }}">Print<span><i class="bi bi-file-earmark-arrow-down"></i></span></a></td> 
                {% endif %}
                {% if c.get_payment_status_display == 'SUCCESS' or c.get_payment_status_display == 'PENDING'%}
                  <td><a class="btn btn-outline-danger btn-sm" href="cancelbooking_mumbaidarshan/{{ c.id }}" onclick = "alert('r u sure you want to cancel?')">Cancel</a></td>  
                {% endif %}
                {% if c.get_payment_status_display == 'PENDING'%}
                  <td><a class="btn btn-outline-info btn-sm" href="pendingpayment/mumbaidarshan/{{ c.id }}" onclick = "alert('r u sure you want to pay?')">Pay</a></td>  
                {% endif %}
            </tr>	
		{% endfor %}
</table>

<table style="width: 85%; border-collapse:collapse;" class="table table-striped table-bordered table-hover">
    {% if package_history1 %}
    <h4> Shirdi </h4>
    <tr>
			<th> Package </th>
			
      <th> Seats </th>
			<th> Date of travel </th>
      <th> Booked on </th>
      <th> Payment </th>
			<th> Amount </th>
      <th> Invoice </th>
      <th> Cancel booking </th>
      <th> Pay </th>
		</tr>
    {% endif %}
		{% for c in package_history1 %}
            <tr>
                <td>{{ c.package }}</td>
                
                <td>{{ c.number_of_passengers }}</td>
                
                <td>{{ c.date_booked }}</td>
                <td>{{ c.dt }}</td>
                {% if c.get_payment_status_display == 'CANCELED' %}
                  <td><p style = "color: red;">{{ c.get_payment_status_display }}</p></td>
                {% else %}
                  <td>{{ c.get_payment_status_display }}</td>
                {% endif %}
                <td>{{ c.amount }}</td>
                {% if c.get_payment_status_display == 'SUCCESS' or c.get_payment_status_display == 'PENDING' or c.get_payment_status_display == 'CANCELED'%}
                  <td><a class="btn btn-outline-primary btn-sm signup-button" href="generateinvoice_shirdi/{{ c.id }}">Print<span><i class="bi bi-file-earmark-arrow-down"></i></span></a></td> 
                {% endif %}
                {% if c.get_payment_status_display == 'SUCCESS' or c.get_payment_status_display == 'PENDING'%}
                  <td><a class="btn btn-outline-danger btn-sm" href="cancelbooking_shirdi/{{ c.id }}" onclick = "alert('r u sure you want to cancel?')">Cancel</a></td>  
                {% endif %}
                {% if c.get_payment_status_display == 'PENDING'%}
                  <td><a class="btn btn-outline-info btn-sm" href="pendingpayment/shirdi/{{ c.id }}" onclick = "alert('r u sure you want to pay?')">Pay</a></td>  
                {% endif %}

            </tr>	
		{% endfor %}
</table>

<table style="width: 85%;" class="table table-striped table-bordered table-hover">
    {% if package_history2 %}
    <h4>Ashtavinayak Darshan </h4>
    <tr align = center>
			<th> Package </th>
			
      <th> Seats </th>
			<th> Date of travel </th>
      <th> Booked on </th>
      <th> Payment </th>
			<th> Amount </th>
      <th> Invoice </th>
      <th> Cancel booking </th>
      <th> Pay </th>
		</tr>
    {% endif %}
		{% for c in package_history2 %}
            <tr>
                <td>{{ c.package }}</td>
                
                <td>{{ c.number_of_passengers }}</td>
                <td>{{ c.date_booked }}</td>
                <td>{{ c.dt }}</td>
                {% if c.get_payment_status_display == 'CANCELED' %}
                  <td><p style = "color: red;">{{ c.get_payment_status_display }}</p></td>
                {% else %}
                  <td>{{ c.get_payment_status_display }}</td>
                {% endif %}
                <td>{{ c.amount }}</td>
                {% if c.get_payment_status_display == 'SUCCESS' or c.get_payment_status_display == 'PENDING' or c.get_payment_status_display == 'CANCELED'%}
                  <td><a class="btn btn-outline-primary btn-sm signup-button" href="generateinvoice_ashtavinayakdarshan/{{ c.id }}">Print<span><i class="bi bi-file-earmark-arrow-down"></i></span></a></td> 
                {% endif %}
                {% if c.get_payment_status_display == 'SUCCESS' or c.get_payment_status_display == 'PENDING'%}
                  <td><a class="btn btn-outline-danger btn-sm" href="cancelbooking_ashtavinayakdarshan/{{ c.id }}" onclick = "alert('r u sure you want to cancel?')">Cancel</a></td>  
                {% endif %}
                {% if c.get_payment_status_display == 'PENDING'%}
                  <td><a class="btn btn-outline-info btn-sm" href="pendingpayment/ashtavinayakdarshan/{{ c.id }}" onclick = "alert('r u sure you want to pay?')">Pay</a></td>  
                {% endif %}

            </tr>	
		{% endfor %}
</table>

<br><hr><br>


<table style="width: 85%; border-collapse:collapse;" class="table table-striped table-bordered table-hover">
    {% if cancelpackages_history %}
    <h4> Canceled Packages Booking </h4>
    <tr>
			<th> Package </th>
			
      <th> Seats </th>
      <th> Date booked </th>
			<th> Date of travel </th>
      <th> Date canceled </th>
      <th> Booking status </th>
      <th> Refund status </th>
			<th> Amount </th>
      
      

      
		</tr>
    {% endif %}
		{% for c in cancelpackages_history %}
            <tr align = left>
                <td>{{ c.package }}</td>
                
                <td>{{ c.number_of_passengers }}</td>
                <td>{{ c.date_time_booked }}</td>
                <td>{{ c.date_booked }}</td>
                <td>{{ c.dt }}</td>
                <td><p style = "color: red;"> CANCELED </p></td>
                {% if c.get_payment_status_display == "SUCCESS" %}
                  <td>{{ c.get_refund_status_display }}</td>
                {% else %}
                  <td>NA</td>
                {% endif %}
                <td>{{ c.amount }}</td>
                
                
                

            </tr>	
		{% endfor %}
</table>


<table style="width: 85%; border-collapse:collapse;" class="table table-striped table-bordered table-hover">
    {% if cancelcharter_history %}
    <h4>Canceled Charter Bookings</h4>
    <tr align = 'center'>
			<th> Source </th>
			<th> Destination </th>
      <th> Date booked </th>
			<th> Date of travel </th>
			<th> Date released </th>
      <th> Date canceled </th>
      <th> Booking status </th>
      <th> Refund status </th>
      <th> Amount </th>
      
  
		</tr>
    {% endif %}
		{% for c in cancelcharter_history %}
            <tr align = center>
                <td>{{ c.source }}</td>
                <td>{{ c.destination }}</td>
                <td>{{ c.date_time_booked }}</td>
                <td>{{ c.date_booked }}</td>
                <td>{{ c.date_released }}</td>
                <td>{{ c.dt }}</td>
                <td><p style = "color: red;"> CANCELED </p></td>
                {% if c.get_payment_status_display == 'SUCCESS' %}
                  <td>{{ c.get_refund_status_display }}</td>
                {% else %}
                  <td>NA</td>
                {% endif %}
                <td>{{ c.amount }}</td>
                
                

            </tr>	
		{% endfor %}
</table>


{% endblock %}